<div class="modal-dialog">
  <div class="modal-content">
    <% if label.errors.any? %>
        <div id="error_explanation">
            <h2><%= pluralize(label.errors.count, "error") %> prohibited this user from being saved:</h2>
            <ul>
                <% label.errors.full_messages.each do |message| %>
                <li><%= message %></li>
                <% end %>
            </ul>
        </div>
    <% end %>

    <% if label.id.blank? %>
        <%= form_for(label, remote: true) do |f| %>
            <div class="modal-header">
                <h5 class="modal-title">
                    新規ラベル追加
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group field">
                    <h5>店舗名:  <%= store.name %></h5>
                    <label>ラベル名: </label>
                    <%= f.text_field :name %><br>

                    <label>タイプ: </label>
                    <%= f.select :work_type, Label.work_types.keys.map {|k| [I18n.t("enums.label.work_type.#{k}"), k] } %><br>

                    <label>詳細</label><br>
                    <%= f.text_area :content %><br>

                    <%= f.hidden_field :store_id, :value => store.id %>


                </div>
            </div>
            <div class="modal-footer actions">
                <%= f.submit "ラベルを登録", class: "btn btn-primary"%>
            </div>
        <% end %>
    <% else %>
        <%= form_for(label) do |f| %>
            <div class="modal-header">
                <h5 class="modal-title">
                    ラベルの編集
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group field">
                    <h5>店舗名:  <%= store.name %></h5>
                    <label>ラベル名: </label>
                    <%= f.text_field :name %><br>

                    <label>タイプ: </label>
                    <%= f.select :work_type, Label.work_types.keys.map {|k| [I18n.t("enums.label.work_type.#{k}"), k] } %><br>

                    <label>詳細</label><br>
                    <%= f.text_area :content %><br>

                    <label>ラベルの付与</label>
                    <%= f.collection_check_boxes :select_staff_ids, users, :id, :last_name, {include_hidden: false} do |b| %>
                        <% if StaffLabel.find_by(staff_id: b.value, label_id: label.id).present? %>
                            <%= b.label { b.check_box(checked: true) + b.text } %>
                        <% else %>
                            <%= b.label { b.check_box + b.text } %>
                        <% end %>
                    <% end %>

                    <%= f.hidden_field :store_id, :value => store.id %>
                </div>
            </div>
            <div class="modal-footer actions">
                <%= f.submit "変更を保存", class: "btn btn-primary"%>
                <%= link_to "削除", label_path(label),method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn btn-danger" %>
            </div>
        <% end %>
    <% end %>

  </div>
</div>